## flask를 사용하자.

### 플라스크 설치 방법
```
pip install flask
```

### 플라스크 동작 방식 

- `flask`는 서버 측 웹 앱을 만드는데 필요한 모듈 컬렉션을 제공한다. 
    - 태스크에 필요한 최소한의 기술 집합을 제공한다. 
    - django와 달리 작고 가벼우며 사용하기 쉽다. 

여기서 만들 건 겨우 2페이지에 불과한 가벼운 작업이라서 플라스크로도 충분하다. 

- flask 설치와 작동 여부 확인 
    - webapp 폴더의 hello_flask.py 확인

- OS 명령행에서 flask 실행하기 
    - IDLE에서 실행하지 않는 것이 좋다. IDLE은 이런 종류의 작업을 하도록 설계되어 있지 않기 때문에 적합하지 않다. 

    - 이런 종류의 작업이란 `상용 수준의 애플리케이션`을 만드는 것을 말한다. 

    - 적합한 환경으로는 `OS의 명령행`에서 인터프리터로 직접 코드를 실행하는 것이 좋다. 
        - windows의 커맨드, vscode의 터미널 등등 

webapp 폴더로 이동해서 `hello_flask.py` 파일을 실행해보자. 

실행하고 나서부터 flask가 작업을 진행하며 내장 웹 서버가 작업을 실행할 때 마다 화면에 메시지가 출력된다. 

```
Running on http://127.0.0.1:5000 
```

말 그대로 `http://127.0.0.1:5000` 주소에서 웹 요청을 대기하고 있다는 뜻. 해당 링크로 이동해보자. 

웹 브라우저 : `Hello world from Flask!!`라는 문자열이 나타남. `hello_flask.py`에서 입력한 문자열임

터미널 창 
```
127.0.0.1 - - [10/Apr/2024 15:09:27] "GET / HTTP/1.1" 200
```

### 코드의 동작 설명 - webapp/hello_flask.py 직접 확인할 것

### 우리가 만들려고 하는 것 

- 필요한 페이지
    - 입력을 받을 수 있는 페이지
    - search4letters 함수를 실행한 결과를 출력할 페이지 

- 변경해야 할 내용
1. HTML 폼을 반환하도록 hello 함수를 수정
2. HTML 폼에서 입력을 받도록 do_search 함수도 수정
3. do_search는 다른 웹 페이지를 결과로 반환하도록 수정

html 관련 내용 p.253 ~ 256
[링크](https://python.itcarlow.ie/ed2/)에서 원본파일들 다운로드 받을 수 있음 

### 웹앱을 클라우드에 배포하기 

`파이썬애니웨어(PythonAnywhere)`라는 AWS에서 호스트하는 클라우드 기반 서비스가 있다. 

지금까지는 `로컬 PC`에서 `app.run()`을 실행했다면 그 코드를 `파이썬애니웨어`에서 실행한다는 것이다. 파이썬애니웨어 환경에서 app.run()을 실행하려고 하면 웹앱 실행이 거절된다. 

클라우드에 배포할 때는 app.run()을 삭제해야 하고 
로컬 PC에서 실행할 때는 app.run()을 추가해서 실행해야 하는 건 매우 귀찮은 일이다. 

웹앱을 로컬에서 실행하는지 아니면 원격으로 파이썬에니웨어에서 실행하는지에 따라 자동으로 실행 코드를 선택할 수 있는 방법이 뭐가 있을까? 

- `if __name__ == '__main__' : ` (던더 네임 던더 메인)

로컬 PC에서 실행할 부분은 `던더 네임 던더 메인` suite에 두면 된다. 

vsearch4web.py를 보면 해당 부분에 `app.run()` 메소드를 위치시킨 걸 볼 수 있다. 